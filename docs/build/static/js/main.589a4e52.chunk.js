(this["webpackJsonp907sv-lab2"]=this["webpackJsonp907sv-lab2"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var a,i=n(1),r=n.n(i),c=n(8),s=n.n(c),o=(n(13),n(2)),u=(n(14),n(4)),l=n(3),d=["All","Done","Not done"];!function(t){t[t.REMOVE=0]="REMOVE",t[t.CHANGE_POSITION=1]="CHANGE_POSITION",t[t.CHANGE_STATE=2]="CHANGE_STATE",t[t.EDIT=3]="EDIT",t[t.CREATE=4]="CREATE"}(a||(a={}));var j={list:Array(),filterParams:{category:d[0],searchString:""}};function b(t,e,n){var a,i,r=0;a=e>0?0:n.length-1;for(var c=n.sort((function(t,e){return t.position-e.position})),s=0;s<c.length;s++)if(c[s].id===t){if(e>0){0!==s&&(a=s-1),r=s;break}s!==n.length-1&&(a=s+1),r=s;break}return i=c[a].position,c[a].position=c[r].position,c[r].position=i,Object(u.a)(c)}function O(t){switch(t.list=t.list.sort((function(t,e){return t.position-e.position})),t.filterParams.category){case d[1]:return t.list.filter((function(e){return e.isDone&&e.name.includes(t.filterParams.searchString)}));case d[2]:return t.list.filter((function(e){return!e.isDone&&e.name.includes(t.filterParams.searchString)}));default:return t.list.filter((function(e){return e.name.includes(t.filterParams.searchString)}))}}var p=n(0),f=function(t){var e=t.item,n=t.dispatch,r=t.closeItem,c=Object(i.useState)(e.name),s=Object(o.a)(c,2),u=s[0],l=s[1],d=Object(i.useRef)(null);return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{"data-testid":"editForm",action:"",onSubmit:function(t){return function(t){t.preventDefault(),""!==u&&n({type:a.EDIT,payload:{id:e.id,name:u}}),r()}(t)},children:[Object(p.jsx)("input",{"data-testid":"edit-input",type:"text",value:u,onChange:function(t){l(t.target.value)},onBlur:function(t){return function(t){t.relatedTarget===d.current&&""!==u&&n({type:a.EDIT,payload:{id:e.id,name:u}}),r()}(t)}}),Object(p.jsx)("button",{"data-testid":"edit-button",ref:d,type:"submit",children:"Save"})]})})},h=function(t){var e=t.item,n=t.isFirst,r=t.isLast,c=t.dispatch,s=Object(i.useState)(!1),u=Object(o.a)(s,2),l=u[0],d=u[1];return Object(p.jsxs)(p.Fragment,{children:[!l&&Object(p.jsx)("li",{"data-testid":"list-item",style:e.isDone?{textDecoration:"line-through"}:{},children:e.name}),l&&Object(p.jsx)(f,{item:e,dispatch:c,closeItem:function(){return d(!1)}}),Object(p.jsx)("input",{"data-testid":"item-checkbox",type:"checkbox",checked:e.isDone,onChange:function(){return c({type:a.CHANGE_STATE,payload:{id:e.id,isDone:!e.isDone}})}}),Object(p.jsx)("button",{"data-testid":"remove-button",onClick:function(){return c({type:a.REMOVE,payload:{id:e.id}})},children:"Remove"}),Object(p.jsx)("button",{"data-testid":"edit-cancel-button",onClick:function(){return d(!l)},children:l?"Cancel":"Edit"}),!n&&Object(p.jsx)("button",{"data-testid":"up",onClick:function(){return c({type:a.CHANGE_POSITION,payload:{id:e.id,number:1}})},children:"\u2191"}),!r&&Object(p.jsx)("button",{"data-testid":"down",onClick:function(){return c({type:a.CHANGE_POSITION,payload:{id:e.id,number:-1}})},children:"\u2193"})]})},m=function(t){var e=t.list,n=t.dispatch;return Object(p.jsx)("ul",{children:e.map((function(t,a){return Object(p.jsx)(h,{item:t,isFirst:0===a,isLast:a===e.length-1,dispatch:n},t.id)}))})},v=function(t){var e=t.filter,n=Object(i.useState)(""),a=Object(o.a)(n,2),r=a[0],c=a[1];return Object(p.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e({name:"updateSearch",value:r})},children:[Object(p.jsx)("input",{"data-testid":"search-input",type:"text",value:r,onChange:function(t){return c(t.target.value)}}),Object(p.jsx)("button",{"data-testid":"search-button",type:"submit",children:"Search"})]})},x=function(t){var e=t.dispatch,n=Object(i.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],u=Object(i.useState)(0),l=Object(o.a)(u,2),d=l[0],j=l[1];function b(){if(""!==c){var t={id:Date.now().toString(36)+Math.random().toString(36).substr(2),name:c,isDone:!1,position:d};j((function(t){return t+1})),s(""),e({type:a.CREATE,payload:{item:t}})}else alert("?")}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{"data-testid":"create-input",type:"text",value:c,onChange:function(t){return s(t.target.value)}}),Object(p.jsx)("button",{"data-testid":"create-button",onClick:function(){return b()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},y=function(t){var e=t.filterValues,n=t.updateCategory,a=Object(i.useState)(e[0]),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(p.jsx)("select",{"data-testid":"select",name:"select",value:c,onChange:function(t){s(t.target.value),n({name:"updateCategory",value:t.target.value})},children:e.map((function(t,e){return Object(p.jsx)("option",{"data-testid":"category-option",value:t,children:t},e)}))})},g="32452345";var E=function(){var t=Object(i.useState)(function(){var t=localStorage.getItem(g);return null===t?j:JSON.parse(t)}()),e=Object(o.a)(t,2),n=e[0],r=e[1],c=Object(i.useState)(""),s=Object(o.a)(c,2),f=s[0],h=s[1],E=Object(i.useState)(d[0]),S=Object(o.a)(E,2),C=S[0],T=S[1];function I(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;switch(t.type){case a.REMOVE:return Object(l.a)(Object(l.a)({},e),{},{list:Object(u.a)(e.list.filter((function(e){return e.id!==t.payload.id})))});case a.CHANGE_POSITION:return Object(l.a)(Object(l.a)({},e),{},{list:b(t.payload.id,t.payload.number,e.list)});case a.CHANGE_STATE:return Object(l.a)(Object(l.a)({},e),{},{list:Object(u.a)(e.list.map((function(e){return e.id===t.payload.id&&(e.isDone=t.payload.isDone),e})))});case a.EDIT:return Object(l.a)(Object(l.a)({},e),{},{list:Object(u.a)(e.list.map((function(e){return e.id===t.payload.id&&(e.name=t.payload.name),e})))});case a.CREATE:return Object(l.a)(Object(l.a)({},e),{},{list:[].concat(Object(u.a)(e.list),[t.payload.item])});default:return Object(l.a)({},e)}}(t,n);localStorage.setItem(g,JSON.stringify(e)),r(e)}function A(t){switch(t.name){case"updateSearch":h(t.value);break;case"updateCategory":T(t.value)}}return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b"}),Object(p.jsx)("h2",{children:"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u21162. \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{dispatch:I}),Object(p.jsx)(y,{filterValues:d,updateCategory:A}),Object(p.jsx)("br",{}),Object(p.jsx)(v,{filter:A}),Object(p.jsx)("br",{}),Object(p.jsx)(m,{list:O({list:n.list,filterParams:{category:C,searchString:f}}),dispatch:I})]})]})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.589a4e52.chunk.js.map