(this["webpackJsonp907sv-lab2"]=this["webpackJsonp907sv-lab2"]||[]).push([[4],{25:function(t){t.exports=JSON.parse('{"apiKey":"AIzaSyBTuF4n9IsexPuuuxfIVPi5Ajjas_7fFxs","authDomain":"trash-e2044.firebaseapp.com","databaseURL":"https://trash-e2044-default-rtdb.firebaseio.com","projectId":"trash-e2044","storageBucket":"trash-e2044.appspot.com","messagingSenderId":"282465846092","appId":"1:282465846092:web:a692f73181a5863ed085e9","measurementId":"G-RJ6NFEDRWZ"}')},38:function(t,e,n){},39:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var a,i=n(4),r=n.n(i),c=n(24),s=n.n(c),o=(n(38),n(9)),u=(n(39),n(13)),d=n(10),l=["All","Done","Not done"];!function(t){t[t.REMOVE=0]="REMOVE",t[t.CHANGE_POSITION=1]="CHANGE_POSITION",t[t.CHANGE_STATE=2]="CHANGE_STATE",t[t.EDIT=3]="EDIT",t[t.CREATE=4]="CREATE"}(a||(a={}));var b={list:Array(),filterParams:{category:l[0],searchString:""}};function j(t,e,n){var a,i,r=0;a=e>0?0:n.length-1;for(var c=n.sort((function(t,e){return t.position-e.position})),s=0;s<c.length;s++)if(c[s].id===t){if(e>0){0!==s&&(a=s-1),r=s;break}s!==n.length-1&&(a=s+1),r=s;break}return i=c[a].position,c[a].position=c[r].position,c[r].position=i,Object(u.a)(c)}function O(t){switch(t.list=t.list.sort((function(t,e){return t.position-e.position})),t.filterParams.category){case l[1]:return t.list.filter((function(e){return e.isDone&&e.name.includes(t.filterParams.searchString)}));case l[2]:return t.list.filter((function(e){return!e.isDone&&e.name.includes(t.filterParams.searchString)}));default:return t.list.filter((function(e){return e.name.includes(t.filterParams.searchString)}))}}var f=n(3),p=function(t){var e=t.item,n=t.dispatch,r=t.closeItem,c=Object(i.useState)(e.name),s=Object(o.a)(c,2),u=s[0],d=s[1],l=Object(i.useRef)(null);return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{"data-testid":"editForm",action:"",onSubmit:function(t){return function(t){t.preventDefault(),""!==u&&n({type:a.EDIT,payload:{id:e.id,name:u}}),r()}(t)},children:[Object(f.jsx)("input",{"data-testid":"edit-input",type:"text",value:u,onChange:function(t){d(t.target.value)},onBlur:function(t){return function(t){t.relatedTarget===l.current&&""!==u&&n({type:a.EDIT,payload:{id:e.id,name:u}}),r()}(t)}}),Object(f.jsx)("button",{"data-testid":"edit-button",ref:l,type:"submit",children:"Save"})]})})},h=function(t){var e=t.item,n=t.isFirst,r=t.isLast,c=t.dispatch,s=Object(i.useState)(!1),u=Object(o.a)(s,2),d=u[0],l=u[1];return Object(f.jsxs)(f.Fragment,{children:[!d&&Object(f.jsx)("li",{"data-testid":"list-item",style:e.isDone?{textDecoration:"line-through"}:{},children:e.name}),d&&Object(f.jsx)(p,{item:e,dispatch:c,closeItem:function(){return l(!1)}}),Object(f.jsx)("input",{"data-testid":"item-checkbox",type:"checkbox",checked:e.isDone,onChange:function(){return c({type:a.CHANGE_STATE,payload:{id:e.id,isDone:!e.isDone}})}}),Object(f.jsx)("button",{"data-testid":"remove-button",onClick:function(){return c({type:a.REMOVE,payload:{id:e.id}})},children:"Remove"}),Object(f.jsx)("button",{"data-testid":"edit-cancel-button",onClick:function(){return l(!d)},children:d?"Cancel":"Edit"}),!n&&Object(f.jsx)("button",{"data-testid":"up",onClick:function(){return c({type:a.CHANGE_POSITION,payload:{id:e.id,number:1}})},children:"\u2191"}),!r&&Object(f.jsx)("button",{"data-testid":"down",onClick:function(){return c({type:a.CHANGE_POSITION,payload:{id:e.id,number:-1}})},children:"\u2193"})]})},m=function(t){var e=t.list,n=t.dispatch;return Object(f.jsx)("ul",{children:e.map((function(t,a){return Object(f.jsx)(h,{item:t,isFirst:0===a,isLast:a===e.length-1,dispatch:n},t.id)}))})},v=function(t){var e=t.filter,n=Object(i.useState)(""),a=Object(o.a)(n,2),r=a[0],c=a[1];return Object(f.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e({name:"updateSearch",value:r})},children:[Object(f.jsx)("input",{"data-testid":"search-input",type:"text",value:r,onChange:function(t){return c(t.target.value)}}),Object(f.jsx)("button",{"data-testid":"search-button",type:"submit",children:"Search"})]})},x=function(t){var e=t.dispatch,n=Object(i.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],u=Object(i.useState)(0),d=Object(o.a)(u,2),l=d[0],b=d[1];function j(){if(""!==c){var t={id:Date.now().toString(36)+Math.random().toString(36).substr(2),name:c,isDone:!1,position:l};b((function(t){return t+1})),s(""),e({type:a.CREATE,payload:{item:t}})}else alert("?")}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{"data-testid":"create-input",type:"text",value:c,onChange:function(t){return s(t.target.value)}}),Object(f.jsx)("button",{"data-testid":"create-button",onClick:function(){return j()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},g=function(t){var e=t.filterValues,n=t.updateCategory,a=Object(i.useState)(e[0]),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(f.jsx)("select",{"data-testid":"select",name:"select",value:c,onChange:function(t){s(t.target.value),n({name:"updateCategory",value:t.target.value})},children:e.map((function(t,e){return Object(f.jsx)("option",{"data-testid":"category-option",value:t,children:t},e)}))})},y=n(12),E=n(15);function S(){var t=Object(y.c)();return Object(f.jsx)("button",{onClick:function(e){e.preventDefault();var n=new E.a.auth.GoogleAuthProvider;t.signInWithPopup(n).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},type:"button",children:"LOGIN WITH GOOGLE"})}n(42);var C=function(){var t=Object(i.useState)(b),e=Object(o.a)(t,2),n=e[0],r=e[1],c=Object(i.useState)(""),s=Object(o.a)(c,2),p=s[0],h=s[1],C=Object(i.useState)(l[0]),I=Object(o.a)(C,2),T=I[0],A=I[1],D=E.a.database(),N=Object(i.useState)(Object(y.d)().data),k=Object(o.a)(N,2),P=k[0],G=k[1];function R(t){if(P){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;switch(t.type){case a.REMOVE:return Object(d.a)(Object(d.a)({},e),{},{list:Object(u.a)(e.list.filter((function(e){return e.id!==t.payload.id})))});case a.CHANGE_POSITION:return Object(d.a)(Object(d.a)({},e),{},{list:j(t.payload.id,t.payload.number,e.list)});case a.CHANGE_STATE:return Object(d.a)(Object(d.a)({},e),{},{list:Object(u.a)(e.list.map((function(e){return e.id===t.payload.id&&(e.isDone=t.payload.isDone),e})))});case a.EDIT:return Object(d.a)(Object(d.a)({},e),{},{list:Object(u.a)(e.list.map((function(e){return e.id===t.payload.id&&(e.name=t.payload.name),e})))});case a.CREATE:return Object(d.a)(Object(d.a)({},e),{},{list:[].concat(Object(u.a)(e.list),[t.payload.item])});default:return Object(d.a)({},e)}}(t,n);D.ref("stores/".concat(P.uid)).set({store:e})}}function w(t){switch(t.name){case"updateSearch":h(t.value);break;case"updateCategory":A(t.value)}}return Object(i.useEffect)((function(){var t=E.a.auth().onAuthStateChanged((function(t){return G((function(){return t?(D.ref("stores/".concat(t.uid)).on("value",(function(t){var e,n=null===(e=t.val())||void 0===e?void 0:e.store;r(void 0===n?b:n)})),t):P}))}));return function(){return t()}}),[]),Object(f.jsx)(i.Suspense,{fallback:"Loading...",children:Object(f.jsx)(y.a,{fallback:Object(f.jsx)(S,{}),children:Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b"}),Object(f.jsx)("h2",{children:"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u21162. \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{dispatch:R}),Object(f.jsx)(g,{filterValues:l,updateCategory:w}),Object(f.jsx)("br",{}),Object(f.jsx)(v,{filter:w}),Object(f.jsx)("br",{}),Object(f.jsx)(m,{list:O({list:n.list,filterParams:{category:T,searchString:p}}),dispatch:R})]})]})})})},I=n(25);s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(y.b,{firebaseConfig:I,children:Object(f.jsx)(C,{})})}),document.getElementById("root"))}},[[43,8,10]]]);
//# sourceMappingURL=main.0cac08ad.chunk.js.map